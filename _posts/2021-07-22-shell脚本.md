---
layout: post
title: shell脚本
subtitle: shell脚本
date: 2021-07-22
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - linux
---

# shell 脚本规范

```
一条命令只做一件事
为了组合命令和多次执行，使用脚本文件保存需要执行的任务
要对脚本添加可读可执行的权限 chmod u+rx filename

#!/bin/bash //sh文件开头加这句话，表示用bash运行


```

# 执行

```
bash /filename.sh //新开一个进程执行,可以不赋予执行权限
./filename.sh //新开一个进程执行,用shutup

source ./filename //当前进程运行，会对当前环境造成影响，比如运行了cd,当前会到新的文件，上面的不会只对。这跟创不创建进程有关系。
. filename.sh //当前进程运行用shutup


```

# 管道

主要是方便两条脚本命令进行通信，管道与信号一样，也是进程通信的一种方式，比如把第一个命令的执行结果传递给第二个。管道符还能连接两个命令，管道符是通过子进程中运行的。避免在管道符中使用内部命令

```
ps ｜ cat
ech0 123 | ps

```

# 重定向

一个进程默认打开标准的输入（cmd 输入的命令）、标准的输出（运行命令正常的结果）、错误输出（运行命令错误）。重定向符号主要是将输入和输出建立一个连接

输入重定向 利用文件 代替键盘输入
输出重定向，利用文件代替终端接受命令的输出

```

read var < /path/to/a/file  //输入重定向

echo 123 > /path/to/a/file //先对file进行清空，再输出到file,

echo 123 >> /path/to/a/file //输出到file，file后面追加

echo 123 2> /path/to/a/file //错误输出到file

echo 123 &> /path/to/a/file // 不管是错误输出还是标准输出都到file


```
