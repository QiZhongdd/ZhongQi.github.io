---
layout: post
title: å‡½æ•°ç»„åˆ
subtitle: å‡½æ•°ç»„åˆ
date: 2020-05-24
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - å‡½æ•°å¼ç¼–ç¨‹
  - jsåŸç”Ÿå®ç°
---

# å‡½æ•°ç»„åˆ Compose

æ‰€è°“çš„å‡½æ•°ç»„åˆå°±æ˜¯å°†å¤šä¸ªä¸ªå‡½æ•°ç»„åˆåœ¨ä¸€èµ·ã€‚ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°æ‰§è¡Œã€‚è¿™äº›å‡½æ•°éƒ½æ˜¯**ä¸€å…ƒå‡½æ•°**ï¼Œä¸‹é¢æ˜¯ compose çš„æœ€å¸¸è§çš„ä¾‹å­ã€‚

```
function a(x){
  return x*2
}
function g(x){
  return x+1;
}
var compose=function(f,g){
  return function(x){
    f(g(x))
  }
}
compose(a,g);
```

ä¸Šé¢çš„ä»£ç æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯ä¸€æ¬¡åªèƒ½ä¼ å…¥ä¸¤ä¸ªå‡½æ•°ï¼Œä¸èƒ½ä¼ å…¥å¤šä¸ªå‡½æ•°ã€‚
**compose å‡½æ•°çš„ç‰¹ç‚¹æ˜¯ä»å³åˆ°å·¦æ‰§è¡Œï¼Œè€Œä¸æ˜¯ä»å¤–åˆ°å³æ‰§è¡Œï¼Œè¿™æ ·æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼ŒåŒæ—¶éœ€è¦ compose å¤„ç†çš„å‡½æ•°åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆé™¤äº†ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°ï¼‰ï¼Œå½“æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°æ—¶ï¼Œè¿™æ—¶å°±éœ€è¦å€Ÿç”¨æŸ¯é‡ŒåŒ–å…ˆå¯¹å‡½æ•°å¤„ç†**

# å‡½æ•°ç»„åˆå­

> å‡½æ•°ç»„åˆçš„æ•°æ®æµæ˜¯ä»å³åˆ°å·¦çš„ï¼Œæœ€å³è¾¹çš„å‡½æ•°å…ˆæ‰§è¡Œï¼Œç„¶åå°†è¿”å›å€¼ä¼ ç»™ä¸‹ä¸€ä¸ªå‡½æ•°æ‰§è¡Œã€‚ä½†æœ‰äº›äººå–œæ¬¢ä»å·¦åˆ°å³ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è¿˜æœ‰ pipeï¼ˆç®¡é“ï¼‰å®ç°ï¼Œå®ƒçš„æ•°æ®æ˜¯ä»å·¦åˆ°å³çš„ï¼Œå®ç°çš„æ•ˆæœè·Ÿ composeğŸ¥ï¼Œåªæ˜¯æ•°æ®æµæ–¹å‘ä¸åŒã€‚

**åœ¨ compose ä¸­æˆ‘ä»¬é€šè¿‡ç»„åˆå­æ§åˆ¶æµçš„æ–¹å‘**

> åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¸å¯èƒ½é€šè¿‡ if/elseã€for å»æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ç»„åˆå­ï¼Œç»„åˆå­èƒ½é€šè¿‡ä¸å…¶ä»–å‡½æ•°è¿›è¡Œç»„åˆï¼Œæ§åˆ¶æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼Œé€šè¿‡é“¾å¼è°ƒç”¨å¯¹ä¸­é—´çš„ç»“æœè¿›è¡Œæ“ä½œã€‚è¿™ä¹Ÿæ˜¯æƒ°æ€§æ±‚å€¼çš„ä¸€ç§ã€‚ç®€å•çš„è¯´å°±æ˜¯å…ˆæ‰§è¡Œé‚£ä¸ªå‡½å­ç»„åˆå­ï¼Œå…ˆå¾—åˆ°ä»€ä¹ˆå€¼ï¼Œç„¶åå†ä¼ ç»™ä¸‹ä¸€ä¸ªç»„åˆå­æ“ä½œã€‚é€šè¿‡ä¸€äº›åˆ—çš„è°ƒç”¨å¾—åˆ°æœ€åè‡ªå·±æƒ³è¦çš„å€¼ï¼Œå¸¸è§ç»„åˆå­ï¼š

![Image text](/img/WechatIMG15.png)

# compose çš„å®ç°

```
function compose(){
   var args = arguments;
   var start = args.length - 1;
  return function(){
    let i=start;
     let result=args[start].apply(this,arguments)
    while(i--){
      result=args[i].call(this,result);
    }
    return result;
  }
}
```

# pointfree

æ‰€è°“çš„ pointfree å°±æ˜¯æ— éœ€æåŠå°†è¦æ“ä½œçš„å‚æ•°æ—¶ä»€ä¹ˆæ ·çš„ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„ç»„åˆè¿ç®—å¾—åˆ°è‡ªå·±æƒ³è¦çš„æ•°æ®

```
// éœ€æ±‚ï¼šè¾“å…¥ 'kevin daisy kelly'ï¼Œè¿”å› 'K.D.K'

// é pointfreeï¼Œå› ä¸ºæåˆ°äº†æ•°æ®ï¼šname
var initials = function (name) {
    return name.split(' ').map(compose(toUpperCase, head)).join('. ');
};
// pointfree
// å…ˆå®šä¹‰åŸºæœ¬è¿ç®—
var split = curry(function(separator, str) { return str.split(separator) })
var head = function(str) { return str.slice(0, 1) }
var toUpperCase = function(str) { return str.toUpperCase() }
var join = curry(function(separator, arr) { return arr.join(separator) })
var map = curry(function(fn, arr) { return arr.map(fn) })

var initials = compose(join('.'), map(compose(toUpperCase, head)), split(' '));

initials("kevin daisy kelly");
```

ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾—å‡ºå‡½æ•°çš„ç»„æˆ compose å’ŒæŸ¯é‡ŒåŒ– curry éå¸¸æœ‰åŠ©äºå®ç° pointfreeï¼Œ**åˆæˆå‡½æ•°æ—¶ï¼Œå¦‚æœåŸºæœ¬å‡½æ•°çš„å‚æ•°æœ‰å¤šä¸ªï¼Œéœ€è¦ç”¨æŸ¯é‡ŒåŒ–è½¬æ¢**ã€‚å¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±ä¸æ‰‹å†™åŸºç¡€å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ramda.js è¿™ä¸ªåº“

**ponitfree çš„æœ¬è´¨**
pointfree å°±æ˜¯å°†åŸºç¡€çš„å‡½æ•°ç»„åˆæˆå¤æ‚ç‚¹çš„å‡½æ•°ï¼ŒåŸºæœ¬ä¸ç”¨ç®¡ä¼ å…¥çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·ï¼Œåªæ˜¯ç»„åˆè¿ç®—

pointfree èƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´ï¼Œå‡å°‘å‘½åï¼Œæé«˜ä»£ç å¤ç”¨ã€‚
