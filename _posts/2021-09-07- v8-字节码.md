---
layout: post
title: v8-字节码
subtitle: v8-字节码
date: 2021-07-29
author: Qi
header-img: img/404-bg.jpg
catalog: true
tags:
  - v8
---

# 为什么需要引用字节码

早期的 v8 为了提高执行的速度，直接将 js 的代码直接编译成机器码，随着移动端的普及，直接编译成二进制的代码会有两个致命问题

- 空间问题，编译后的代码会占用较多的内存，比如一段几 k 的代码编译成机器码可能会达到几 M。
- 时间问题，编译时间过久，影响代码启动速度；

为了解决这两个问题，v8 引用了字节码，引用字节码主要有以下优点

- 编译的时间较直接编译成二进制码的时间短
- 编译成字节码占用的内存比二进制码占用的少，比如比如一段几 k 的代码编译成机器码可能会达到几 M。而编译成字节码只是几十 k.
- 采用字节码，可以简化程序的复杂度，使得 V8 移植到不同的 CPU 架构平台更加容易，因为不同的架构的二进制码是不一样的，直接编译成二进制码需要进行不同架构的适配，而字节码不需要，只需交给解释器执行即可

![Image text](/img/27d30dbb95e3bb3e55b9bc2a56e14d4b.webp)
